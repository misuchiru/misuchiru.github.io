System.register("chunks:///_virtual/StateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,s;return{setters:[function(t){e=t.defineProperty},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"168e3DjqXBD9p9XqekN++H+","StateMachine",void 0);t("StateMachine",function(){function t(t){e(this,"state",null),e(this,"nextState",null),e(this,"isFirstExec",!1),e(this,"stateFunc",new Map),this.state=t,this.stateFunc.clear()}var s=t.prototype;return s.addState=function(t,e){this.stateFunc.set(t,e)},s.transfer=function(t){this.nextState=t},s.getState=function(){return this.state},s.isState=function(t){return this.state==t},s.update=function(t){this.nextState&&(this.state=this.nextState,this.nextState=null,this.isFirstExec=!0);var e=this.stateFunc.get(this.state);null!=e&&e(this.isFirstExec,t),this.isFirstExec=!1},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/Protocol.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var n;t("CMD",void 0),e._RF.push({},"36146Re8pNC8I6CE1bq9Yay","Protocol",void 0),function(t){t.STORY_ARTICLES="https://fierce-stream-34058.herokuapp.com/api/v1/story_articles",t.SAVE_SCORE="https://fierce-stream-34058.herokuapp.com/api/v1/statistics"}(n||(n=t("CMD",{})));t("Protocol",function(){function t(){}return t.GET=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.send(),n.onload=function(){e(JSON.parse(n.responseText))}},t.POST=function(t,e){var n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(e))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Dialog.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Config.ts"],(function(e){"use strict";var t,i,r,n,o,a,l,c,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.SpriteFrame,c=e.Sprite,s=e.Label,p=e.Component},function(e){u=e.Config}],execute:function(){var g,d,f,h,b,y,m,w,v,D,S,_,z;o._RF.push({},"6dcea8OLhpIZ4jfmD+ZY8qB","Dialog",void 0);var C=a.ccclass,H=a.property;e("Dialog",(g=C("Dialog"),d=H({type:l}),f=H({type:l}),h=H({type:c}),b=H({type:s}),y=H({type:s}),g((v=t((w=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(n(t),"seedSprite",v,n(t)),r(n(t),"roleSprite",D,n(t)),r(n(t),"dialogHead",S,n(t)),r(n(t),"dialogName",_,n(t)),r(n(t),"dialogContent",z,n(t)),t}i(t,e);var o=t.prototype;return o.start=function(){this.node.active=!1,this.dialogContent.string=""},o.setVisible=function(e){this.node.active=e},o.setDialog=function(e){this.node.active=!0,this.dialogContent.string=e.body,this.dialogName.string=e.role,this._changeHeadIcon(e.role)},o._changeHeadIcon=function(e){var t=u.ROLE_TYPE;switch(e){case t.PLAYER:this.dialogHead.spriteFrame=this.roleSprite;break;case t.SEED:this.dialogHead.spriteFrame=this.seedSprite}},t}(p)).prototype,"seedSprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),D=t(w.prototype,"roleSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),S=t(w.prototype,"dialogHead",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),_=t(w.prototype,"dialogName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),z=t(w.prototype,"dialogContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),m=w))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/QuestionController.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,r,o,s,u,l,a,c,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.defineProperty},function(t){s=t.cclegacy,u=t._decorator,l=t.SpriteFrame,a=t.Node,c=t.Label,p=t.Sprite,h=t.Component}],execute:function(){var f,b,y,g,w,v,d,C,m,Q,S,z,q,D,B,F,R,_,P;s._RF.push({},"9bc4b0M4GdHiID9Ph2xAa+l","QuestionController",void 0);var k=u.ccclass,A=u.property;t("QuestionController",(f=k("QuestionController"),b=A({type:l}),y=A({type:l}),g=A({type:a}),w=A({type:c}),v=A({type:[c]}),d=A({type:a}),C=A({type:p}),m=A({type:c}),f((z=e((S=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return e=t.call.apply(t,[this].concat(s))||this,n(r(e),"correctSprite",z,r(e)),n(r(e),"errorSprite",q,r(e)),n(r(e),"question",D,r(e)),n(r(e),"questionContent",B,r(e)),n(r(e),"answers",F,r(e)),n(r(e),"result",R,r(e)),n(r(e),"resultBg",_,r(e)),n(r(e),"resultContent",P,r(e)),o(r(e),"currentQuestionData",{}),e}i(e,t);var s=e.prototype;return s.start=function(){this.node.active=!1},s.setVisible=function(t){this.node.active=t},s.setQuestion=function(t){console.log(t),this.node.active=!0,this.question.active=!0,this.result.active=!1,this.questionContent.string=t.body;for(var e=0;e<t.selections.length;e++)this.answers[e].string=t.selections[e];this.currentQuestionData=t},s.onChooseAnswerClick=function(t,e){console.log("click",e),0==e?this.showResult(!0):this.showResult(!1)},s.setQuestionState=function(t){t?(this.node.active=!0,this.question.active=!0,this.result.active=!1):this.node.active=!1},s.showResult=function(t){this.question.active=!1,this.result.active=!0,t?(this.resultBg.spriteFrame=this.correctSprite,this.resultContent.string="答對了!\n答案是「"+this.currentQuestionData.selections[0]+"」"):(this.resultBg.spriteFrame=this.errorSprite,this.resultContent.string="不對喔!\n答案是「"+this.currentQuestionData.selections[0]+"」")},s.closeQuestion=function(){this.setQuestionState(!1)},e}(h)).prototype,"correctSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),q=e(S.prototype,"errorSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),D=e(S.prototype,"question",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),B=e(S.prototype,"questionContent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),F=e(S.prototype,"answers",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(S.prototype,"result",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),_=e(S.prototype,"resultBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),P=e(S.prototype,"resultContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),Q=S))||Q));s._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e795aQsxZBCDL/JmYMwule4","Config",void 0);e("Config",{STORY_TYPE:{SCENARIO:"scenario",QUESTION:"question",NOTE:"note"},ROLE_TYPE:{QUESTION:"問題",SEED:"種子超人",PLAYER:"主角"},SEED_DISTANCE:1e3});t._RF.pop()}}}));

System.register("chunks:///_virtual/Gamemanager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./StateMachine.ts","./Protocol.ts","./Config.ts","./Dialog.ts","./QuestionController.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,l,u,c,p,g,d,h,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.defineProperty},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,u=t.Animation,c=t.Component},function(t){p=t.StateMachine},function(t){g=t.Protocol,d=t.CMD},function(t){h=t.Config},function(t){f=t.Dialog},function(t){y=t.QuestionController}],execute:function(){var b,m,S,v,I,N,C,_,A,T,G,D,O,E,L,w,M;r._RF.push({},"ebdf1qmEdtBCrndOniP5Ya3","Gamemanager",void 0);var P,x=s.ccclass,R=s.property;!function(t){t[t.NULL=0]="NULL",t[t.LOADING=1]="LOADING",t[t.WAITING=2]="WAITING",t[t.MOVING=3]="MOVING"}(P||(P={}));t("Gamemanager",(b=x("Gamemanager"),m=R({type:l}),S=R({type:l}),v=R({type:l}),I=R({type:l}),N=R({type:f}),C=R({type:y}),b((T=e((A=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(o(e),"storyNumber",T,o(e)),a(o(e),"storyArticles",[{body:"",role:"",type:"",ans:[]}]),a(o(e),"maxContentCount",0),a(o(e),"currentContentIndex",-1),a(o(e),"isMoving",!1),n(o(e),"bgSpeed",G,o(e)),n(o(e),"background",D,o(e)),n(o(e),"player",O,o(e)),n(o(e),"seed",E,o(e)),a(o(e),"movingDistance",0),n(o(e),"loadingRoot",L,o(e)),n(o(e),"dialogScript",w,o(e)),n(o(e),"questionScript",M,o(e)),a(o(e),"gamestate",new p(P.NULL)),e}i(e,t);var r=e.prototype;return r.start=function(){this.gamestate.addState(P.LOADING,this._stateLoading.bind(this)),this.gamestate.addState(P.WAITING,this._stateWaiting.bind(this)),this.gamestate.addState(P.MOVING,this._stateMoving.bind(this)),this.gamestate.transfer(P.LOADING),this.loadingRoot.active=!0,this.seed.active=!1},r.update=function(t){this.gamestate.update(t)},r.onClick=function(t){this.gamestate.getState()==P.WAITING&&this._nextContent()},r._stateLoading=function(t,e){var i=this;t&&g.GET(d.STORY_ARTICLES,(function(t){var e=t.story_articles[i.storyNumber].article;i._setStoryArticles(e),i.gamestate.transfer(P.WAITING),i.loadingRoot.active=!1,console.log(e)}))},r._stateWaiting=function(t,e){t&&(this._setPlayerMoveState(!1),this._nextContent())},r._stateMoving=function(t,e){t&&(this._setPlayerMoveState(!0),this.seed.active=!0,this.seed.position.x+=h.SEED_DISTANCE,this.seed.setPosition(this.seed.position),this.movingDistance=0);var i=this.background.position,n=this.bgSpeed*e;i.x-=n,this.background.setPosition(i),this.movingDistance+=n,this.movingDistance>h.SEED_DISTANCE&&this.gamestate.transfer(P.WAITING)},r._setPlayerMoveState=function(t){var e=this.player.getComponent(u);t?null==e||e.play("player"):null==e||e.pause()},r._setStoryArticles=function(t){this.storyArticles=t,this.maxContentCount=t.length,this.currentContentIndex=0},r._nextContent=function(){var t=this.currentContentIndex;if(t!=this.maxContentCount){var e,i,n=this.storyArticles[t];if(console.log("data type:",n.type),n.type==h.STORY_TYPE.QUESTION)null===(e=this.dialogScript)||void 0===e||e.setVisible(!1),null===(i=this.questionScript)||void 0===i||i.setQuestion(n);else if(n.type==h.STORY_TYPE.SCENARIO){var o,a;null===(o=this.dialogScript)||void 0===o||o.setDialog(n),null===(a=this.questionScript)||void 0===a||a.setVisible(!1)}else n.type==h.STORY_TYPE.NOTE&&this.gamestate.getState()==P.WAITING&&this.gamestate.transfer(P.MOVING);this.currentContentIndex++}},e}(c)).prototype,"storyNumber",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=e(A.prototype,"bgSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),D=e(A.prototype,"background",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),O=e(A.prototype,"player",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),E=e(A.prototype,"seed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),L=e(A.prototype,"loadingRoot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),w=e(A.prototype,"dialogScript",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(A.prototype,"questionScript",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=A))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./StateMachine.ts","./Protocol.ts","./Config.ts","./Dialog.ts","./QuestionController.ts","./Gamemanager.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});